# Инструкция по тестированию сохранения данных при смене языка

## Проблема
При смене языка интерфейса пользовательские данные заменялись на данные по умолчанию (sample data).

## Решение
Добавлена функция `shouldReplaceWithSample()`, которая проверяет:
- Если поле пустое → загрузить sample данные
- Если поле содержит sample данные (сравнение с предыдущими sample) → заменить на новые sample
- Если поле содержит пользовательские данные → НЕ заменять

## Способы тестирования

### Способ 1: Автоматический тест через консоль браузера (рекомендуется)

1. Убедитесь, что приложение запущено: `http://localhost:8080`
2. Откройте приложение в браузере
3. Откройте консоль разработчика (F12 или Ctrl+Shift+I)
4. Скопируйте содержимое файла `test-language-switch.js`
5. Вставьте в консоль и нажмите Enter
6. Тест автоматически:
   - Введет тестовые данные
   - Сменит язык несколько раз (DE → RU → EN → DE → RU → EN)
   - Проверит, что данные сохранились
   - Выведет результаты в консоль

### Способ 2: Ручной тест

1. Откройте `http://localhost:8080` в браузере
2. Введите свои данные в поля:
   - **Biography**: Введите свою биографию
   - **Job Posting**: Введите описание вакансии
   - **Wishes** (опционально): Введите свои пожелания
3. Смените язык несколько раз:
   - DE → RU
   - RU → EN
   - EN → DE
   - DE → RU
4. После каждой смены языка проверьте:
   - ✅ Данные в поле Biography остались прежними
   - ✅ Данные в поле Job Posting остались прежними
   - ✅ Данные в поле Wishes остались прежними (если были введены)
5. Если данные НЕ изменились → тест пройден ✅
6. Если данные заменились на sample → есть баг ❌

### Способ 3: Тестовая страница

1. Откройте файл `test-language-switch.html` в браузере
2. Следуйте инструкциям на странице

## Ожидаемое поведение

✅ **Правильно:**
- Пользователь вводит свои данные
- Пользователь меняет язык
- Данные остаются прежними (не заменяются на sample)

❌ **Неправильно:**
- Пользователь вводит свои данные
- Пользователь меняет язык
- Данные заменяются на sample данные

## Технические детали

Функция `shouldReplaceWithSample(currentValue, previousSampleValue)`:
- Возвращает `true` если поле пустое → можно загрузить sample
- Возвращает `true` если текущее значение = предыдущий sample → можно заменить на новый sample
- Возвращает `false` если текущее значение ≠ предыдущий sample → это пользовательские данные, НЕ заменять

Логика в `loadSampleData()`:
```javascript
if (biographyTextarea && shouldReplaceWithSample(currentBiographyValue, previousSampleData.biography)) {
    biographyTextarea.value = biographySampleTrimmed;
}
```

## Проверка исправления

После применения исправления проверьте:
1. ✅ Пустые поля заполняются sample данными при первой загрузке
2. ✅ Sample данные обновляются при смене языка (если пользователь не редактировал)
3. ✅ Пользовательские данные НЕ заменяются при смене языка
4. ✅ Все три поля (biography, jobPosting, wishes) работают одинаково

